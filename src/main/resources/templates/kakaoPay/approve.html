<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>Kakaopay Sample</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
</head>
<body>
<h1>승인 결과(result of approval)</h1>
<p th:text="${response}"></p>
<a href="javascript:closePopup();" target="_parent">close</a>
</body>
<script th:inline="javascript">
    let response = [[${response}]];
    function closePopup() {
        window.opener.location.href = `/user/order/detail/${response.partner_order_id}`;
        self.close();
    }

    document.addEventListener('DOMContentLoaded',()=>{
        if (response.partner_order_id !== null && response.partner_order_id !== undefined){
            closePopup()
        }
    })
</script>
</html>